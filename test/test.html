<!doctype html>
<meta charset="utf-8">
<title></title>
<style>
  .test {
    border: 2px solid black;
    margin: 0.5em;
    padding: 0.25em 0.5em;
  }
  h2 {
    margin-top: 0;
  }
  .ok::after {
    content: "✔";
    color: green;
  }
  .fail::after {
    content: "✖";
    color: red;
  }
</style>
<script src="../node_modules/document-register-element/build/document-register-element.js"></script>
<script src="../dist/html-import.min.js"></script>


<div class="test">
  <h2>Import everything</h2>
  <html-import src="content.html"></html-import>
</div>


<div class="test">
  <h2>Import only lorem</h2>
  <html-import src="content.html#lorem"></html-import>
</div>


<div class="test">
  <h2>Import only ipsum</h2>
  <html-import src="content.html#ipsum"></html-import>
</div>


<div class="test">
  <h2>Import file B which imports file C</h2>
  <html-import src="b.html"></html-import>
</div>


<div class="test">
  <h2>Import a &lt;template&gt; element's content if referenced by ID</h2>
  <html-import src="template.html#TheTemplate"></html-import>
</div>


<div class="test">
  <h2>Import a element that's inside a &lt;template&gt; element in the imported content</h2>
  <html-import src="insidetemplate.html#SomethingInsideTheTemplate"></html-import>
</div>


<div class="test">
  <h2>Scripts in imported files should run</h2>
  <html-import src="script.html"></html-import>
</div>


<div class="test">
  <h2>External scripts in imported files should run</h2>
  <html-import src="external-script.html"></html-import>
</div>


<div class="test">
  <h2>Scripts in imported files in imported files should run</h2>
  <html-import src="import-script.html"></html-import>
</div>


<div class="test">
  <h2>Promise resolution for nested imports (all paragraphs should be red)</h2>
  <html-import src="a.html" class="resolveOnAllImported"></html-import>
  <script>
    (function(){
      var test = document.currentScript.parentElement;
      var subject = test.querySelector(".resolveOnAllImported");
      subject.ready.then(function(){
        var paragraphs = test.querySelectorAll("p");
        for(var paragraph of paragraphs){
          paragraph.style.color = "red";
        }
      });
    })();
  </script>
</div>


<div class="test">
  <h2 class="rejectOnEmptyReport">This is not importing anything, so the promise should be rejected</h2>
  <html-import src="" class="rejectOnEmptyImport"></html-import>
  <script>
    (function(){
      var test = document.currentScript.parentElement;
      var subject = test.querySelector(".rejectOnEmptyImport");
      subject.ready
        .then( () => "fail", () => "ok" )
        .then( (state) => document.querySelector(".rejectOnEmptyReport").classList.add(state) )
    })();
  </script>
</div>
